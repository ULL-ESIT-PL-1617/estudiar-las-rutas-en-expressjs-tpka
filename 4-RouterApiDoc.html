
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Documentación Router API · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="3-Middleware.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Homepage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="chapter1/nodejs.html">
            
                <a href="chapter1/nodejs.html">
            
                    
                    NodeJS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="chapter2/">
            
                <a href="chapter2/">
            
                    
                    Github
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="chapter2/creacion-de-usuario.html">
            
                <a href="chapter2/creacion-de-usuario.html">
            
                    
                    Creación de usuario
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="chapter2/git.html">
            
                <a href="chapter2/git.html">
            
                    
                    Git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="chapter2/github.html">
            
                <a href="chapter2/github.html">
            
                    
                    Cliente de Github (Mac osx y Windows)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="chapter2/hub.html">
            
                <a href="chapter2/hub.html">
            
                    
                    Hub
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="chapter2/github.io.html">
            
                <a href="chapter2/github.io.html">
            
                    
                    Alojamiento de páginas en github.io
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="chapter2/gh-pages.html">
            
                <a href="chapter2/gh-pages.html">
            
                    
                    Gh-Pages
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="chapter3/">
            
                <a href="chapter3/">
            
                    
                    Herramientas de desarrollo
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="chapter3/c9.html">
            
                <a href="chapter3/c9.html">
            
                    
                    Cloud9
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="chapter3/atom.html">
            
                <a href="chapter3/atom.html">
            
                    
                    Atom
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="chapter3/pandoc.html">
            
                <a href="chapter3/pandoc.html">
            
                    
                    Pandoc
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="chapter4/">
            
                <a href="chapter4/">
            
                    
                    Gitbook
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="chapter4/crear-un-usuario-en-gitbooks.html">
            
                <a href="chapter4/crear-un-usuario-en-gitbooks.html">
            
                    
                    Creación de usuario
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="chapter4/markdown.html">
            
                <a href="chapter4/markdown.html">
            
                    
                    Markdown
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="1-BasicRouting.html">
            
                <a href="1-BasicRouting.html">
            
                    
                    Direccionamiento Básico
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="2-Routing.html">
            
                <a href="2-Routing.html">
            
                    
                    Direccionamiento
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="3-Middleware.html">
            
                <a href="3-Middleware.html">
            
                    
                    Middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.9" data-path="4-RouterApiDoc.html">
            
                <a href="4-RouterApiDoc.html">
            
                    
                    Documentación Router API
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Documentación Router API</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="router-api-documentation">Router API Documentation</h1>
<hr>
<p>Un objeto <em>router</em> es una instancia aislada de middleware (software que asiste a una aplicaci&#xF3;n para interactuar o comunicarse) y ruta. Podemos referirnos a ella como una &quot;mini aplicacion&quot; que es capaz solamente de trabajar con funciones de middleware y de routing. Todas las aplicaciones en Express tienen una <em>router app</em> incluida.</p>
<p>Un router se comporta como un middleware, por lo que se puede usar como argumento para utilizar app.use() o como argumento para otro metodo de router.</p>
<p>El objeto de m&#xE1;s alto nivel de express tiene un metodo Router() que crea un nuevo objeto <em>router</em>.</p>
<p>Una vez creado ese objeto router, ya puedes a&#xF1;adir metodos middleware y HTTP (como <em>get</em>, <em>put</em>, <em>post</em> y otros) como una aplicaci&#xF3;n. Por ejemplo:</p>
<pre><code class="lang-js"><span class="hljs-comment">// invoked for any requests passed to this router</span>
router.use(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next</span>) </span>{
  <span class="hljs-comment">// .. some logic here .. like any other middleware</span>
  next();
});

<span class="hljs-comment">// will handle any request that ends in /events</span>
<span class="hljs-comment">// depends on where the router is &quot;use()&apos;d&quot;</span>
router.get(<span class="hljs-string">&apos;/events&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next</span>) </span>{
  <span class="hljs-comment">// ..</span>
});
</code></pre>
<p>Puedes usar el router como un root URL particular separando tus rutas en archivos o incluso mini-apps.</p>
<pre><code class="lang-js"><span class="hljs-comment">// only requests to /calendar/* will be sent to our &quot;router&quot;</span>
app.use(<span class="hljs-string">&apos;/calendar&apos;</span>, router);
</code></pre>
<h2 id="m&#xE9;todos">M&#xE9;todos</h2>
<hr>
<h3 id="routerallpath-callback--callback">router.all(path, [callback, ...] callback)</h3>
<p>&#xC9;ste metodo es como los metodos <em><strong>router.METHOD(</strong></em>), excepto porque coincide con todos los m&#xE9;todos de HTTP.</p>
<p>&#xC9;ste m&#xE9;todo es extremadamente util para el mapping global logico para prefijos, coincidencias arbitrarias o paths. Por ejemplo, si colocas la siguiente ruta en la parte superior del resto de las otras definiciones de rutas, deber&#xED;a requerir una autenticacion para todos las rutas desde ese punto, y automaticamente cargar un usuario.</p>
<p>Hay que fijarse en que las callbacks no tienen que actuar como puntos y aparte; <em><strong>loadUser</strong></em> puede funcionar como una tarea, a continuacion para continuar coincidiendo con las anteriores rutas usar la funcion <em><strong>next()</strong></em>.</p>
<pre><code class="lang-js">router.all(<span class="hljs-string">&apos;*&apos;</span>, requireAuthentication, loadUser);
</code></pre>
<p>O lo que es lo mismo:</p>
<pre><code class="lang-js">router.all(<span class="hljs-string">&apos;*&apos;</span>, requireAuthentication);
router.all(<span class="hljs-string">&apos;*&apos;</span>, loadUser);
</code></pre>
<p>Otro ejemplo de esta funcionalidad &quot;global&quot; como lista blanca. Este ejemplo es muy parecido al anterior, pero restringe paths con el prefijo &quot;/api&quot;:</p>
<pre><code class="lang-js">router.all(<span class="hljs-string">&apos;/api/*&apos;</span>, requireAuthentication);
</code></pre>
<h3 id="routermethodpath-callback--callback">router.METHOD(path, [callback, ...] callback)</h3>
<p>Los metodos router.METHOD() proporcionan funcionalidad de routing en Express, donde METHOD es uno de los metodos HTTP, como GET, PUT, POST y dem&#xE1;s esta vez escrito en minuscula:<em> router.get(), router.post(), router.put()</em> y otros.</p>
<blockquote>
<p>La funcion del metodo router.get() se llama automaticamente desde el metodo principal HTTP en adicion al metodo GET si router.head() no ha sido llamado por el path antes de router.get().</p>
</blockquote>
<p>Se pueden proveer multiples callbacks, y estas son tratadas y se comportan igual que un middleware, excepto porque estas callbacks deben invocar next(&apos;route&apos;) para parar las callback actuales. Este mecanismo se usa para formar una pre-condicion en una ruta para pasarle el control a una ruta anterior cuando no hay ninguna razon para proceder con la ruta coincidente.</p>
<p>El siguiente fragmento de codigo ilustra la definicion m&#xE1;s simple posible de una ruta. Express traduce el path en una expresion regular, usada internamente para buscar una coincidencia con alguna petici&#xF3;n. Las consultas de strings no se consideran cuando se tratan estas coincidencias, por ejemplo &quot;GET /&quot; coincidir&#xED;a con &quot;GET /?name=tobi&quot;.</p>
<pre><code class="lang-js">router.get(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>)</span>{
  res.send(<span class="hljs-string">&apos;hello world&apos;</span>);
});
</code></pre>
<p>Tambien se pueden usar expresiones regulares, muy utiles si tienes algunas restricciones muy especificas. Por ejemplo, &quot;GET /commits/71dbb9c&quot; coincidiria tambi&#xE9;n con &quot;GET /commits/71db9c..4c084f9&quot;.</p>
<pre><code class="lang-js">router.get(<span class="hljs-regexp">/^\/commits\/(\w+)(?:\.\.(\w+))?$/</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>)</span>{
  <span class="hljs-keyword">var</span> <span class="hljs-keyword">from</span> = req.params[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">var</span> to = req.params[<span class="hljs-number">1</span>] || <span class="hljs-string">&apos;HEAD&apos;</span>;
  res.send(<span class="hljs-string">&apos;commit range &apos;</span> + <span class="hljs-keyword">from</span> + <span class="hljs-string">&apos;..&apos;</span> + to);
});
</code></pre>
<h3 id="routerparamname-callback">router.param(name, callback)</h3>
<p>A&#xF1;ade un disparador de callback a un parametro de ruta donde <em>name</em> es el nombre del parametro y <em>callback</em> es la funcion de callback. En realidad _name _es tecnicamente opcional, pero usar el metodo sin el est&#xE1; en _deprecated _desde Express v4.11.0.</p>
<p>Los parametros de callback son:</p>
<ul>
<li><em>req</em> ,el objeto pedido</li>
<li><em>res</em> ,el objeto de respuesta</li>
<li><em>next</em> ,indica la proxima funcion middleware</li>
<li>El valor del parametro <em>name</em></li>
<li>El valor del parametro</li>
</ul>
<pre><code class="lang-js">router.param(<span class="hljs-string">&apos;user&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next, id</span>) </span>{

  <span class="hljs-comment">// try to get the user details from the User model and attach it to the request object</span>
  User.find(id, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, user</span>) </span>{
    <span class="hljs-keyword">if</span> (err) {
      next(err);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (user) {
      req.user = user;
      next();
    } <span class="hljs-keyword">else</span> {
      next(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&apos;failed to load user&apos;</span>));
    }
  });
});
</code></pre>
<p>Los parametros de callback son locales al router en el cual fueron definidos. No son inerentes  a las aplicaciones montadas o routers. De ahi que, los parametros de callback definidos en el router ser&#xE1;n disparados solamente por los parametros de la ruta definidos en rutas <strong>router.</strong></p>
<p>Un parametro de callback es llamado solamente en un ciclo de peticion-respuesta, incluso si el parametro coincide en multiples routers, como se puede ver en el siguiente ejemplo:</p>
<pre><code class="lang-js">router.param(<span class="hljs-string">&apos;id&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next, id</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;CALLED ONLY ONCE&apos;</span>);
  next();
});

router.get(<span class="hljs-string">&apos;/user/:id&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;although this matches&apos;</span>);
  next();
});

router.get(<span class="hljs-string">&apos;/user/:id&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;and this matches too&apos;</span>);
  res.end();
});
</code></pre>
<p>Con GET /user/42, se imprime por pantalla lo siguiente:</p>
<pre><code class="lang-bash">CALLED ONLY ONCE
although this matches
and this matches too
</code></pre>
<p>El comportamiento del metodo router.param(name, callback) puede ser alterado totalmente pasando tan solo una funcion a router.param(). Esta funcion es una implementacion de como router.param(name, callback) debe comportarse - acepta dos parametros y debe devolver un middleware.</p>
<p>El primer parametro de esta funcion debe ser el nombre del parametro URL que deber&#xE1; ser capturado, el segundo parametro puede ser cualquier objeto JavaScript que deberia ser usado para devolver la implementacion del middleware.</p>
<p>El middleware devuelto por la funcion decide el comportamiento de lo que ocurrir&#xE1; cuando el parametro URL es capturado.</p>
<p>En este ejemplo, la llamada de router.param(name, callback) es modificada a router.param(name, accessId). En vez de aceptar un name y un callback, router.param() aceptar&#xE1; un name y un numero.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;express&apos;</span>);
<span class="hljs-keyword">var</span> app = express();
<span class="hljs-keyword">var</span> router = express.Router();

<span class="hljs-comment">// customizing the behavior of router.param()</span>
router.param(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">param, option</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next, val</span>) </span>{
    <span class="hljs-keyword">if</span> (val == option) {
      next();
    }
    <span class="hljs-keyword">else</span> {
      res.sendStatus(<span class="hljs-number">403</span>);
    }
  }
});

<span class="hljs-comment">// using the customized router.param()</span>
router.param(<span class="hljs-string">&apos;id&apos;</span>, <span class="hljs-number">1337</span>);

<span class="hljs-comment">// route to trigger the capture</span>
router.get(<span class="hljs-string">&apos;/user/:id&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
  res.send(<span class="hljs-string">&apos;OK&apos;</span>);
});

app.use(router);

app.listen(<span class="hljs-number">3000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;Ready&apos;</span>);
});
</code></pre>
<p>En este ejemplo, la llamada de router.param(name, callback) vuelve a ser la misma, pero en vez de un middleware callback, una funcion de chequeo de datos se define para validar el tipo de dato del id del usuario:</p>
<pre><code class="lang-js">router.param(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">param, validator</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res, next, val</span>) </span>{
    <span class="hljs-keyword">if</span> (validator(val)) {
      next();
    }
    <span class="hljs-keyword">else</span> {
      res.sendStatus(<span class="hljs-number">403</span>);
    }
  }
});

router.param(<span class="hljs-string">&apos;id&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">candidate</span>) </span>{
  <span class="hljs-keyword">return</span> !<span class="hljs-built_in">isNaN</span>(<span class="hljs-built_in">parseFloat</span>(candidate)) &amp;&amp; <span class="hljs-built_in">isFinite</span>(candidate);
});
</code></pre>
<h3 id="routerroutepath">router.route(path)</h3>
<p>Devuelve una instancia de una ruta que puede ser usada como manejador de HTTP verbs con middleware opcional. Usar router.route() para no cometer errores de duplicar el nombre de varios routers y ese tipo de errores.</p>
<p>El ejemplo del siguiente codigo ense&#xF1;a como usar router.route() para especificar varios manejadores de metodos HTTP.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> router = express.Router();

router.param(<span class="hljs-string">&apos;user_id&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next, id</span>) </span>{
  <span class="hljs-comment">// sample user, would actually fetch from DB, etc...</span>
  req.user = {
    id: id,
    name: <span class="hljs-string">&apos;TJ&apos;</span>
  };
  next();
});

router.route(<span class="hljs-string">&apos;/users/:user_id&apos;</span>)
.all(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next</span>) </span>{
  <span class="hljs-comment">// runs for all HTTP verbs first</span>
  <span class="hljs-comment">// think of it as route specific middleware!</span>
  next();
})
.get(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next</span>) </span>{
  res.json(req.user);
})
.put(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next</span>) </span>{
  <span class="hljs-comment">// just an example of maybe updating the user</span>
  req.user.name = req.params.name;
  <span class="hljs-comment">// save user ... etc</span>
  res.json(req.user);
})
.post(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next</span>) </span>{
  next(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&apos;not implemented&apos;</span>));
})
.delete(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next</span>) </span>{
  next(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&apos;not implemented&apos;</span>));
});
</code></pre>
<h3 id="routerusepath-function--function">router.use([path], [function, ...] function)</h3>
<p>Usa la funcion o funciones de middleware especificadas, con la ruta de montaje opcional, cuyo valor por defecto es &quot;/&quot;.</p>
<p>Este metodo es identico a app.use(). A continuacion se describe un ejemplo muy simple de uso.</p>
<p>El middleware es como un tubo de fontanera: las solicitudes comienzan en la primera funcion de middleware definida y funciona de manera descendente en el procesado de la pila de middleware para cada ruta en la que haya una coincidencia.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;express&apos;</span>);
<span class="hljs-keyword">var</span> app = express();
<span class="hljs-keyword">var</span> router = express.Router();

<span class="hljs-comment">// simple logger for this router&apos;s requests</span>
<span class="hljs-comment">// all requests to this router will first hit this middleware</span>
router.use(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;%s %s %s&apos;</span>, req.method, req.url, req.path);
  next();
});

<span class="hljs-comment">// this will only be invoked if the path starts with /bar from the mount point</span>
router.use(<span class="hljs-string">&apos;/bar&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next</span>) </span>{
  <span class="hljs-comment">// ... maybe some additional /bar logging ...</span>
  next();
});

<span class="hljs-comment">// always invoked</span>
router.use(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res, next</span>) </span>{
  res.send(<span class="hljs-string">&apos;Hello World&apos;</span>);
});

app.use(<span class="hljs-string">&apos;/foo&apos;</span>, router);

app.listen(<span class="hljs-number">3000</span>);
</code></pre>
<p>El camino de montaje se quita y no es visible para la funcion de middleware. El principal efecto de esta caracteristica es que una funcion de middleware montada puede operar sin cambios en el codigo independientemente de su prefijo de ruta.</p>
<p>El orden en el que se define middleware con router.use() es muy importante, ya que se invocan secuencialmente, por lo que el orden define la precedencia de middleware. Por ejemplo, por lo general, un logger  es el primer middleware que usarias, de modo que cada solicitud se registra.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> logger = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;morgan&apos;</span>);

router.use(logger());
router.use(express.static(__dirname + <span class="hljs-string">&apos;/public&apos;</span>));
router.use(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>)</span>{
  res.send(<span class="hljs-string">&apos;Hello&apos;</span>);
});
</code></pre>
<p>Vale, ahora suponte que quieres ignorar peticiones de loggin para archivos estaticos, pero quieres que continue haciendo logging de rutas y middleware definidos despues de logger(). Simplemente, mueve la llamada a express.static() al comienzo, antes de a&#xF1;adir el logger middleware:</p>
<pre><code class="lang-js">router.use(express.static(__dirname + <span class="hljs-string">&apos;/public&apos;</span>));
router.use(logger());
router.use(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>)</span>{
  res.send(<span class="hljs-string">&apos;Hello&apos;</span>);
});
</code></pre>
<p>Otro ejemplo es el de hacer serve de archivos de multiples directorios, dando la precedencia a &quot;./public&quot; frente al resto de rutas:</p>
<pre><code class="lang-js">app.use(express.static(__dirname + <span class="hljs-string">&apos;/public&apos;</span>));
app.use(express.static(__dirname + <span class="hljs-string">&apos;/files&apos;</span>));
app.use(express.static(__dirname + <span class="hljs-string">&apos;/uploads&apos;</span>));
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="3-Middleware.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Middleware">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Documentación Router API","level":"1.9","depth":1,"previous":{"title":"Middleware","level":"1.8","depth":1,"path":"3-Middleware.md","ref":"3-Middleware.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"4-RouterApiDoc.md","mtime":"2017-03-05T19:22:06.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-03-06T09:10:44.153Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

